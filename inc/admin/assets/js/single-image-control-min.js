!function($){var e=null;function a(e){var a=e.val();return""!==a?a.split(",").map((function(e){return parseInt(e)})):[]}$(".raven-metabox-image-wrapper").find(".raven-image-button").add(".raven-overlay-image-button").on("click",(function(t){var n=$(this).closest(".raven-metabox-image-wrapper"),i=n.find(".raven-image-single-thumb"),r=n.find(".raven-image-id"),l=n.find(".raven-image-button");t.preventDefault(),e&&(e.detach(),e.dispose(),e=null),(e=wp.media({title:"Add Image",library:{type:"image"},button:{text:"Add Image"},multiple:!1})).on("open",(function(){var t=e.state().get("selection"),n=a(r);t.reset(),$.each(n,(function(){attachment=wp.media.attachment(this),t.add(attachment?[attachment]:[])}))})),e.on("select",(function(){var t=e.state().get("selection").first().toJSON();a(r);t.id&&(t.sizes&&t.sizes.medium&&(n.hasClass("raven-hero-image-upload")||n.hasClass("raven-image-large-upload")?t.url=t.sizes.large.url:n.hasClass("raven-image-welcome-upload")?t.url=t.sizes.full.url:t.url=t.sizes.medium.url),i.append(raven_image_control_args.mediaItemTemplate.replace(/ __IMAGE_ID__/g,t.id).replace(/__IMAGE_URL__/g,t.url).replace(/__IMAGE_ALT__/g,t.alt)),r.val(t.id),l.addClass("raven-hidden"),$(".raven-overlay-image-button").hide())})),e.open()})),$(document).on("click",".raven-single-image-remove",(function(e){e.preventDefault();var a=$(this).closest(".raven-metabox-image-wrapper"),t=a.find(".raven-image-single-thumb").find(".raven-image-metabox-preview"),n=a.find(".raven-image-id"),i=a.find(".raven-image-button");return n.val(""),t.remove(),i.removeClass("raven-hidden"),$(".raven-overlay-image-button").css("display","flex"),!1})),$(".raven-image-single-thumb").on("click",".raven-image-edit",(function(a){a.preventDefault();var t=$(this).closest(".raven-image-single-thumb > figure"),n=parseInt(t.data("attachment_id"));return null!==e&&(e.detach(),e.dispose(),e=null),(e=wp.media({id:"raven-edit-attachment-modal",frame:"select",uploader:!1,multiple:!1,title:"Edit Image",library:{post__in:n},button:{text:"Update Image"}}).on("open",(function(){var a=wp.media.attachment(n),t=e.state().get("selection");e.$el.closest(".media-modal").addClass("raven-edit-modal"),a.fetch(),t.add(a)}))).open(),!1}))}(jQuery);